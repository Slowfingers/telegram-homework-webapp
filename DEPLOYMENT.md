# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é Telegram WebApp

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **Telegram Bot** - —Å–æ–∑–¥–∞–Ω —á–µ—Ä–µ–∑ @BotFather
2. **Google Cloud Project** - —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º Google Sheets API
3. **Yandex OAuth –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** - –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫—É
4. **Netlify –∞–∫–∫–∞—É–Ω—Ç** - –¥–ª—è —Ö–æ—Å—Ç–∏–Ω–≥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üîß –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
/newbot
# –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –∏ –ø–æ–ª—É—á–∏—Ç–µ BOT_TOKEN

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ WebApp –∫–Ω–æ–ø–∫—É
/setmenubutton
# –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
# Bot Settings -> Menu Button
# –£–∫–∞–∂–∏—Ç–µ URL: https://your-app.netlify.app
# –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏: "–î–æ–º–∞—à–∫–∞ üìö"
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets API

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –í–∫–ª—é—á–∏—Ç–µ Google Sheets API:
   ```
   APIs & Services -> Library -> Google Sheets API -> Enable
   ```
4. –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç:
   ```
   APIs & Services -> Credentials -> Create Credentials -> Service Account
   ```
5. –°–∫–∞—á–∞–π—Ç–µ JSON-–∫–ª—é—á —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
6. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é Google Sheets —Ç–∞–±–ª–∏—Ü—É
7. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –¥–æ—Å—Ç—É–ø —Å–µ—Ä–≤–∏—Å–Ω–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É –∫ —Ç–∞–±–ª–∏—Ü–µ (email –∏–∑ JSON)
8. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID —Ç–∞–±–ª–∏—Ü—ã –∏–∑ URL (–º–µ–∂–¥—É /d/ –∏ /edit)

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Yandex.Disk API

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [Yandex OAuth](https://oauth.yandex.ru/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   ```
   –ù–∞–∑–≤–∞–Ω–∏–µ: Homework App
   –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã: –í–µ–±-—Å–µ—Ä–≤–∏—Å—ã
   Redirect URI: https://oauth.yandex.ru/verification_code
   –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ (—á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å)
   ```
3. –ü–æ–ª—É—á–∏—Ç–µ OAuth —Ç–æ–∫–µ–Ω:
   ```bash
   # –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_CLIENT_ID):
   https://oauth.yandex.ru/authorize?response_type=code&client_id=YOUR_CLIENT_ID&redirect_uri=https://oauth.yandex.ru/verification_code&scope=cloud_api:disk.read cloud_api:disk.write
   
   # –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –∏ –ø–æ–ª—É—á–∏—Ç–µ –∫–æ–¥
   # –û–±–º–µ–Ω—è–π—Ç–µ –∫–æ–¥ –Ω–∞ —Ç–æ–∫–µ–Ω:
   curl -X POST \
     -H "Content-Type: application/x-www-form-urlencoded" \
     -d "grant_type=authorization_code&code=YOUR_CODE&client_id=YOUR_CLIENT_ID&client_secret=YOUR_CLIENT_SECRET" \
     https://oauth.yandex.ru/token
   ```

### 4. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Netlify

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫ Netlify
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
# –í Netlify Dashboard -> Site Settings -> Environment Variables
TELEGRAM_BOT_TOKEN=your_bot_token_here
GOOGLE_SERVICE_ACCOUNT_JSON={"type":"service_account",...} # –í–µ—Å—å JSON –∫–∞–∫ —Å—Ç—Ä–æ–∫–∞
SPREADSHEET_ID=your_spreadsheet_id_here
YANDEX_DISK_TOKEN=your_yandex_oauth_token_here
```

3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±–æ—Ä–∫–∏ Netlify:
```toml
# netlify.toml —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –ø—Ä–æ–µ–∫—Ç–µ
[build]
  functions = "netlify/functions"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
```

### 5. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ Google Sheets:**
```bash
curl -X POST https://your-app.netlify.app/.netlify/functions/init-google-sheets
```

2. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ —Å–µ–±—è –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ `debug-api.html` –Ω–∞ –≤–∞—à–µ–º —Å–∞–π—Ç–µ
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–∫—Ü–∏—é "Register Teacher"
   - –£–∫–∞–∂–∏—Ç–µ –≤–∞—à Telegram ID, —Ä–æ–ª—å "admin"

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ WebApp –≤ Telegram
   - –ü—Ä–æ–π–¥–∏—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∫–∞–∫ —É—á–µ–Ω–∏–∫
   - –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∞–π–ª

## üîë –í–∞–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –û–±–Ω–æ–≤–∏—Ç–µ Admin ID –≤ –∫–æ–¥–µ:

–í —Ñ–∞–π–ª–µ `netlify/functions/google-sheets-utils.js`:
```javascript
const TELEGRAM_ADMIN_ID = 'YOUR_TELEGRAM_ID'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à ID
```

–í —Ñ–∞–π–ª–µ `netlify/functions/register-teacher.js`:
```javascript
const ADMIN_ID = 'YOUR_TELEGRAM_ID'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à ID
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Google Sheets:

–ü–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –ª–∏—Å—Ç—ã:

**Students:**
- telegramId | class | lastName | firstName

**Teachers:**
- telegramId | lastName | firstName | subject | classes | role

**Homework:**
- id | class | subject | description | deadline | createdDate

**Submissions:**
- telegramId | class | homeworkId | submissionDate | fileUrl | status

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API:
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ debug-api.html
https://your-app.netlify.app/debug-api.html

# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- Initialize Google Sheets
- Register Student
- Get User
- Add Homework
- Get Homework
- Register Teacher
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ WebApp:
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ diagnostic.html
https://your-app.netlify.app/diagnostic.html

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- DOM —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –ù–∞–≤–∏–≥–∞—Ü–∏—é –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏
- Telegram API
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º—ã —Å Google Sheets:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SPREADSHEET_ID –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç GOOGLE_SERVICE_ACCOUNT_JSON

### –ü—Ä–æ–±–ª–µ–º—ã —Å Yandex.Disk:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è OAuth —Ç–æ–∫–µ–Ω–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∞—Ö –¥–æ—Å—Ç—É–ø–∞ (—á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ /Homework_App/

### –ü—Ä–æ–±–ª–µ–º—ã —Å Telegram:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å BOT_TOKEN
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ WebApp URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –±–æ—Ç–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é initData

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ Netlify Functions:
```bash
# –í Netlify Dashboard -> Functions -> View logs
# –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
```

### Google Sheets –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–∞–±–ª–∏—Ü–µ
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ API –∫–≤–æ—Ç—ã

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–¥–∞:
1. –ü—É—à –≤ –æ—Å–Ω–æ–≤–Ω—É—é –≤–µ—Ç–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ Netlify
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
4. –£–≤–µ–¥–æ–º–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ OAuth —Ç–æ–∫–µ–Ω—ã
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –Ω–µ–æ–±—ã—á–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –ª–æ–≥–∞—Ö
- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ Google Sheets

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–°–æ–∑–¥–∞–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
1. –ö–∞–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
2. –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–¥–∞–Ω–∏—è
3. –ö–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ
4. –ö—É–¥–∞ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
