<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéì –î–æ–º–∞—à–∫–∞ - WebApp</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="styles-new.css">
</head>
<body>
    <div id="app">
        <!-- Animated Background -->
        <div class="bg-animation">
            <div class="floating-shapes">
                <div class="shape shape-1"></div>
                <div class="shape shape-2"></div>
                <div class="shape shape-3"></div>
                <div class="shape shape-4"></div>
                <div class="shape shape-5"></div>
            </div>
        </div>

        <!-- Loading Screen -->
        <div id="loadingScreen" class="screen active">
            <div class="loading-container">
                <div class="logo-animation">
                    <div class="logo-circle">
                        <span class="logo-emoji">üéì</span>
                    </div>
                    <div class="loading-dots">
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                    </div>
                </div>
                <h2 class="loading-text">–ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–≤–æ—é –¥–æ–º–∞—à–∫—É...</h2>
            </div>
        </div>

        <!-- Registration Screen -->
        <div id="registrationScreen" class="screen">
            <div class="container">
                <div class="welcome-header">
                    <div class="welcome-icon">üöÄ</div>
                    <h1 class="welcome-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h1>
                    <p class="welcome-subtitle">–î–∞–≤–∞–π –∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è! –†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ</p>
                </div>
                
                <form id="registration-form" class="modern-form">
                    <div class="form-group">
                        <label for="class-select" class="form-label">
                            <span class="label-icon">üè´</span>
                            –¢–≤–æ–π –∫–ª–∞—Å—Å
                        </label>
                        <div class="select-wrapper">
                            <select id="class-select" class="modern-select" required>
                                <option value="">–í—ã–±–µ—Ä–∏ —Å–≤–æ–π –∫–ª–∞—Å—Å</option>
                                <option value="5–ê">5–ê</option>
                                <option value="5–ë">5–ë</option>
                                <option value="6–ê">6–ê</option>
                                <option value="6–ë">6–ë</option>
                                <option value="7–ê">7–ê</option>
                                <option value="7–ë">7–ë</option>
                                <option value="8–ê">8–ê</option>
                                <option value="8–ë">8–ë</option>
                                <option value="9–ê">9–ê</option>
                                <option value="9–ë">9–ë</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="last-name" class="form-label">
                            <span class="label-icon">üë§</span>
                            –§–∞–º–∏–ª–∏—è
                        </label>
                        <input type="text" id="last-name" class="modern-input" placeholder="–í–≤–µ–¥–∏ —Å–≤–æ—é —Ñ–∞–º–∏–ª–∏—é" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="first-name" class="form-label">
                            <span class="label-icon">‚ú®</span>
                            –ò–º—è
                        </label>
                        <input type="text" id="first-name" class="modern-input" placeholder="–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?" required>
                    </div>
                    
                    <button type="submit" class="btn-modern btn-primary">
                        <span class="btn-text">–ü–æ–µ—Ö–∞–ª–∏! üéâ</span>
                        <div class="btn-ripple"></div>
                    </button>
                </form>
            </div>
        </div>

        <!-- Main Menu Screen -->
        <div id="mainScreen" class="screen">
            <div class="container">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <span class="avatar-emoji">üéØ</span>
                    </div>
                    <div class="profile-info">
                        <h2 class="profile-name">–ü—Ä–∏–≤–µ—Ç, <span id="user-name"></span>! üëã</h2>
                        <p class="profile-class">–ö–ª–∞—Å—Å: <span id="user-class"></span></p>
                    </div>
                </div>
                
                <div class="menu-grid">
                    <button id="check-homework-btn" class="menu-card card-blue">
                        <div class="card-icon">üìö</div>
                        <div class="card-content">
                            <h3>–£–∑–Ω–∞—Ç—å –¥–æ–º–∞—à–∫—É</h3>
                            <p>–ü–æ—Å–º–æ—Ç—Ä–∏ —á—Ç–æ –∑–∞–¥–∞–ª–∏</p>
                        </div>
                        <div class="card-arrow">‚Üí</div>
                    </button>
                    
                    <button id="submit-homework-btn" class="menu-card card-green">
                        <div class="card-icon">üìù</div>
                        <div class="card-content">
                            <h3>–°–¥–∞—Ç—å –¥–æ–º–∞—à–∫—É</h3>
                            <p>–ó–∞–≥—Ä—É–∑–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ</p>
                        </div>
                        <div class="card-arrow">‚Üí</div>
                    </button>
                </div>

                <!-- Admin Button (hidden by default) -->
                <button id="admin-btn" class="admin-button" style="display: none;">
                    <span class="admin-icon">‚öôÔ∏è</span>
                    –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
                </button>
            </div>
        </div>

        <!-- Check Homework Screen -->
        <div id="assignmentsScreen" class="screen">
            <div class="container">
                <div class="screen-header">
                    <button id="back-from-check" class="back-btn">
                        <span class="back-icon">‚Üê</span>
                    </button>
                    <h1 class="screen-title">üìö –î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</h1>
                </div>
                
                <div class="tabs-container">
                    <div class="tabs">
                        <button id="current-tab" class="tab-btn active">
                            <span class="tab-icon">üî•</span>
                            –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ
                        </button>
                        <button id="archive-tab" class="tab-btn">
                            <span class="tab-icon">üì¶</span>
                            –ê—Ä—Ö–∏–≤
                        </button>
                    </div>
                </div>
                
                <div id="assignments-list" class="assignments-container">
                    <!-- Assignments will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Submit Homework Screen -->
        <div id="submissionScreen" class="screen">
            <div class="container">
                <div class="screen-header">
                    <button id="back-from-submit" class="back-btn">
                        <span class="back-icon">‚Üê</span>
                    </button>
                    <h1 class="screen-title">üìù –°–¥–∞—Ç—å –¥–æ–º–∞—à–∫—É</h1>
                </div>
                
                <form id="submit-form" class="submit-form">
                    <div class="student-info">
                        <div class="info-row">
                            <span class="info-label">–ö–ª–∞—Å—Å:</span>
                            <span id="submit-class" class="info-value"></span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">–£—á–µ–Ω–∏–∫:</span>
                            <span class="info-value">
                                <span id="submit-last-name"></span> <span id="submit-first-name"></span>
                            </span>
                        </div>
                    </div>
                    
                    <div class="upload-section">
                        <div class="upload-area" id="upload-area">
                            <input type="file" id="homework-file" accept=".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.zip" required>
                            <div class="upload-content">
                                <div class="upload-icon">üìé</div>
                                <h3>–ü–µ—Ä–µ—Ç–∞—â–∏ —Ñ–∞–π–ª —Å—é–¥–∞</h3>
                                <p>–∏–ª–∏ –Ω–∞–∂–º–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞</p>
                                <div class="supported-formats">
                                    PDF, DOC, DOCX, TXT, JPG, PNG, ZIP
                                </div>
                            </div>
                        </div>
                        <div id="file-preview" class="file-preview" style="display: none;">
                            <div class="file-info">
                                <span class="file-icon">üìÑ</span>
                                <div class="file-details">
                                    <span class="file-name"></span>
                                    <span class="file-size"></span>
                                </div>
                                <button type="button" class="remove-file">√ó</button>
                            </div>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn-modern btn-success">
                        <span class="btn-text">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É üöÄ</span>
                        <div class="btn-ripple"></div>
                    </button>
                </form>
            </div>
        </div>

        <!-- Admin Screen -->
        <div id="adminScreen" class="screen">
            <div class="container">
                <div class="screen-header">
                    <button id="back-from-admin" class="back-btn">
                        <span class="back-icon">‚Üê</span>
                    </button>
                    <h1 class="screen-title">‚öôÔ∏è –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h1>
                </div>
                
                <form id="admin-form" class="admin-form">
                    <div class="form-group">
                        <label for="assignment-date" class="form-label">
                            <span class="label-icon">üìÖ</span>
                            –î–∞—Ç–∞ –∑–∞–¥–∞–Ω–∏—è
                        </label>
                        <input type="date" id="assignment-date" class="modern-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="assignment-class" class="form-label">
                            <span class="label-icon">üè´</span>
                            –ö–ª–∞—Å—Å
                        </label>
                        <div class="select-wrapper">
                            <select id="assignment-class" class="modern-select" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å</option>
                                <option value="5–ê">5–ê</option>
                                <option value="5–ë">5–ë</option>
                                <option value="6–ê">6–ê</option>
                                <option value="6–ë">6–ë</option>
                                <option value="7–ê">7–ê</option>
                                <option value="7–ë">7–ë</option>
                                <option value="8–ê">8–ê</option>
                                <option value="8–ë">8–ë</option>
                                <option value="9–ê">9–ê</option>
                                <option value="9–ë">9–ë</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="assignment-topic" class="form-label">
                            <span class="label-icon">üìñ</span>
                            –¢–µ–º–∞
                        </label>
                        <input type="text" id="assignment-topic" class="modern-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ê–ª–≥–æ—Ä–∏—Ç–º—ã —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="assignment-description" class="form-label">
                            <span class="label-icon">üìù</span>
                            –û–ø–∏—Å–∞–Ω–∏–µ
                        </label>
                        <textarea id="assignment-description" class="modern-textarea" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="assignment-link" class="form-label">
                            <span class="label-icon">üîó</span>
                            –°—Å—ã–ª–∫–∞ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
                        </label>
                        <input type="url" id="assignment-link" class="modern-input" placeholder="https://example.com/material">
                    </div>
                    
                    <button type="submit" class="btn-modern btn-primary">
                        <span class="btn-text">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ ‚ú®</span>
                        <div class="btn-ripple"></div>
                    </button>
                </form>
            </div>
        </div>

        <!-- Error Screen -->
        <div id="error-screen" class="screen">
            <div class="container">
                <div class="error-content">
                    <div class="error-icon">üòï</div>
                    <h1 class="error-title">–£–ø—Å! –ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫</h1>
                    <p id="error-message" class="error-message"></p>
                    <button id="retry-btn" class="btn-modern btn-primary">
                        <span class="btn-text">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</span>
                        <div class="btn-ripple"></div>
                    </button>
                </div>
            </div>
        </div>

        <!-- Debug Panel -->
        <div id="debugPanel" class="debug-panel">
            <div class="debug-header">
                <h4>üêõ Debug Info</h4>
                <button onclick="toggleDebug()" class="debug-toggle">‚ùå</button>
            </div>
            <div class="debug-content">
                <div class="debug-section">
                    <strong>Current User:</strong>
                    <pre id="debugCurrentUser">null</pre>
                </div>
                <div class="debug-section">
                    <strong>Last API Response:</strong>
                    <pre id="debugApiResponse">none</pre>
                </div>
                <div class="debug-section">
                    <strong>Telegram Data:</strong>
                    <pre id="debugTelegramData">none</pre>
                </div>
            </div>
        </div>

        <!-- Debug Toggle Button -->
        <button id="debugToggleBtn" onclick="toggleDebug()" class="debug-btn">üêõ</button>

        <!-- Success Modal -->
        <div id="successModal" class="modal">
            <div class="modal-content success">
                <div class="modal-header">
                    <h3>‚úÖ –£—Å–ø–µ—Ö</h3>
                </div>
                <div class="modal-body">
                    <p id="successMessage"></p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" onclick="closeModal('success')">OK</button>
                </div>
            </div>
        </div>

        <!-- Debug Log Panel -->
        <div id="debug-panel" class="fixed bottom-0 left-0 right-0 bg-gray-900 text-green-400 text-xs p-2 max-h-32 overflow-y-auto hidden">
            <div class="flex justify-between items-center mb-1">
                <span class="font-bold">Debug Logs:</span>
                <div class="flex gap-2">
                    <button onclick="clearAppData()" class="text-yellow-400 hover:text-yellow-300 text-xs">üóëÔ∏è Clear</button>
                    <button onclick="toggleDebugPanel()" class="text-red-400 hover:text-red-300">‚úï</button>
                </div>
            </div>
            <div id="debug-logs" class="space-y-1"></div>
        </div>

        <!-- Debug Toggle Button (hidden by default) -->
        <button id="debug-toggle" onclick="toggleDebugPanel()" class="fixed bottom-4 right-4 bg-blue-600 text-white p-2 rounded-full shadow-lg z-50 hidden">
            üêõ
        </button>

    </div>

    <script src="app.js"></script>
</body>
</html>
